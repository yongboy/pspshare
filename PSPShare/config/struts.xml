<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<!--package name="image" namespace="/image" extends="struts-default"-->
	<package name="image" extends="struts-default">
		<action name="upload" class="org.gameye.psp.image.action.ImageHandle" method="upload">
			<result>/WEB-INF/pages/image/upload.jsp</result>
		</action>
		<action name="UploadImage" class="org.gameye.psp.image.action.UploadImage">			
			<!-- 验证上传文件的类型 -->
             <interceptor-ref name ="fileUpload">   
                 <param name ="allowedTypes">image/bmp,image/png,image/x-png,image/gif,image/jpeg,image/jpg,image/pjpeg,application/octet-stream</param>
                 <!-- 1024*1024*5 = 5M -->
                 <param name="maximumSize">5242880</param>
             </interceptor-ref>   
             <interceptor-ref name ="defaultStack"/>
             <!-- 如果加入了验证上传文件的类型,必须要加input -->  
             <result name="success" type="freemarker">/WEB-INF/pages/image/upload_result.html</result>
             <result name="input">/WEB-INF/pages/image/upload.jsp</result>
		</action>
		<action name="Image_*" class="org.gameye.psp.image.action.ImageHandle" method="{1}">
			<result name="success" type="freemarker">/WEB-INF/pages/image/{1}_Result.html</result>
			<result name="failure" type="freemarker">/WEB-INF/pages/image/Failure.html</result>
			<result name="input" type="redirect">upload.do</result>
			<result name="RSS2" type="freemarker">/WEB-INF/pages/image/RSS_Result.jsp</result>
		</action>
	</package>
</struts>